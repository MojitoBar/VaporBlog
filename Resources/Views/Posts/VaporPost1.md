---
date: 2022년 03월 25일 23:52
description: Vapor로 블로그를 만들어본 후기
oneline: "흔한 iOS 개발자가 사서 고생하는 법"
tags: Swift, Vapor
thumbnail: /images/vapor-1.png
contents: Vapor란?/왜 Vapor인가?/내가 겪은 시행착오/마무리
---

## Vapor란?

<img src="/images/vapor-2.png" alt="vapor"/>

**Vapor**는 Swift로 작성된 오픈 소스 ~~웹 프레임 워크~~입니다.

[Vapor](https://github.com/vapor/vapor) 깃허브의 생각보다 많은 스타수를 보니 이쪽 세계에선 꽤 유명한 프레임 워크인 것 같더라고요, **Discord 커뮤니티**도 활성화가 잘 되어있고, 문서도 정리가 잘 되어있어 시작하는데 크게 어려움이 없었습니다.

실제로 사용해본 결과 대부분의 메커니즘이 [Express](https://expressjs.com/ko/) 와 유사하다고 느껴졌는데요, 제가 **Express** 말고는 잘 모르는 것도 있지만, 둘 다 웹 프레임 워크라는 범주에 있기 때문인 것 같기도 합니다.

## 왜 Vapor인가?
그럼 왜 많고 많은 웹 프레임워크들과 라이브러리들을 놔두고 **Vapor**를 선택했느냐??

크게 2가지 이유가 있는데요, 첫번째는 블로그를 운영함에 있어서 ~~Swift~~를 최대한으로 활용하고 싶었습니다.

**html, css, js**를 아예 모르는 건 아니지만 아무래도 하나의 사이트를 운영할 만큼의 사전지식은 없었고, 그것들을 배우기 위해 투자하는 코스트가 아까웠습니다.

그러던 중 찾은 대안이 바로 Swift 정적 사이트 생성 라이브러리인 ~~Publish~~ 와 웹 프레임워크인 ~~Vapor~~입니다.

<img src="/images/publish.png" alt="publish"/>

사실 이전의 블로그를 ~~Publish~~로 만들었었는데요, 아쉬운 점이 몇 가지 있었습니다. 그게 ~~Vapor~~를 선택하게 된 2번째 이유인데 바로 커스텀의 난이도가 너무 높다는 점입니다.

**Publish**의 경우 빌드 시 디렉토리별로 제가 작성한 md 파일을 읽어 Output으로 바꿔 그것을 화면에 뿌리는 방식이었습니다. 따라서 그 화면을 만드는 코드를 수정함으로 제가 원하는 틀로 바꾸는 방식이었는데요.
 
<img src="/images/publish-code.png" alt="publish-code"/>

사진과 같이 작성되어있어 깃헙 댓글 기능인 ~~Utterances~~라도 적용하려하면 너무 어지러운 사태가 벌어졌습니다.

물론 제가 못하는 거 겠지만, **Publish**를 만든 sundell의 블로그에도 댓글 기능이 없는 걸 보면 애초에 못하는 걸 수도...

아무튼 위의 두 가지 이유로 블로그를 ~~Vapor~~로 만들어 배포해보자! 하는 결론에 도달했습니다.

## 내가 겪은 시행착오 
당연히 모든 과정에서 전혀 순탄하지 못했습니다.

그 중 크게 문제가 됐던 2가지를 꼽자면, **포스팅 이전**과 **배포 환경**을 들 수 있는데요.

먼저 ~~포스팅 이전~~에 관한 문제같은 경우엔 이전 블로그에서 포스팅하던 방식은 꽤나 비효율 적이었습니다.
**md 파일**을 작성한다는 이점이 무색할 정도로 **html코드**를 섞어 쓰고있었는데, 이 역시 스타일을 커스텀하는 과정에서 마음대로 되지않자 그냥 static으로 때려박은 결과였습니다.

때문에 Vapor 블로그로 이전함에 있어서 이전 블로그에서 작성된 md파일을 거의 쓸 수 없는 상황이 되었습니다.

그렇지만 netlify로 배포된 이전 블로그는 계속 해서 남겨놓을 예정이기 때문에 아예 못쓰진 않아 나름 나쁘지 않은 것 같습니다.

두 번째는 ~~배포 환경~~입니다. 앞서 설명했듯이 **Vapor**는 빌드를 해도 정적인 Output 파일을 제공해 주지 않는 서버사이드렌더링 방식의 웹 프레임워크입니다. 따라서 기존의 netlify는 못쓰고 새로운 ~~클라우드 컴퓨팅 서비스~~를 찾아야 했습니다.

정말 많은 선택지가 있었지만 유료 재끼고, 안 써본거 재끼고, 이것 저것 따지다 보니 [Heroku](https://www.heroku.com)가 그나마 제일 괜찮은 것 같았습니다. 

<img src="/images/heroku.png" alt="publish-code"/>

그도 그럴 것이 애초에 [Vapor Docs](https://docs.vapor.codes/4.0/deploy/heroku/)에서 **Heroku**로 배포하는 법을 따로 적어놨으니 그만큼 문제없이 잘 동작한다는 뜻 같았습니다.

다만 **Heroku**의 단점인 무료 플랜의 경우 일정 시간동안 사이트를 방문하지 않는다면 잠에 들어 이후 접속할 때 시간이 좀 걸린다는 점이 있습니다.

하지만 맨날 천날 접속하는 사이트도 아니고, ~~Hobby 플랜~~의 경우 한달에 7달러 정도라 하니 무료로 받은 크래딧을 다 쓴 후엔 결제를 해버리는 것도 나쁘지 않은 선택인 것 같습니다.

## 마무리
이렇게 **Vapor**로 블로그를 만들어본 후기를 간단하게 적어봤습니다.

직접 사용해보고 느낀점은 할 만 하지만 추천은 못하겠다.. 정도인데요, 훨씬 쉽고 빠른 대안이 너무 많기 때문에 저처럼 고집 부리지 않는다면 아주 윤택한 블로그 운영을 할 수 있을 것 같습니다 ㅎㅎ..

포스팅에 잘못된 정보나 오타가 있는 경우엔 댓글로 남겨주시면 감사드리겠습니다!!

## 

## 참고자료
<ul>
<li>
    <a href="https://github.com/JohnSundell/Publish">Publish Github</a>
</li>
<li>
    <a href="https://github.com/vapor/vapor">Vapor Github</a>
</li>
</ul>
